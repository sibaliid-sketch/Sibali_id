# Supervisor config - Laravel Queue Workers
# Manage Laravel queue workers for various queues

[program:laravel-worker-high]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/sibali/artisan queue:work redis --queue=high --sleep=3 --tries=3 --max-jobs=1000 --timeout=90
directory=/var/www/sibali
autostart=true
autorestart=true
numprocs=3
user=www-data
redirect_stderr=true
stdout_logfile=/var/log/supervisor/laravel-worker-high.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=3

[program:laravel-worker-default]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/sibali/artisan queue:work redis --queue=default --sleep=3 --tries=3 --max-jobs=1000 --timeout=90
directory=/var/www/sibali
autostart=true
autorestart=true
numprocs=5
user=www-data
redirect_stderr=true
stdout_logfile=/var/log/supervisor/laravel-worker-default.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=3

[program:laravel-worker-low]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/sibali/artisan queue:work redis --queue=low --sleep=3 --tries=3 --max-jobs=1000 --timeout=90
directory=/var/www/sibali
autostart=true
autorestart=true
numprocs=2
user=www-data
redirect_stderr=true
stdout_logfile=/var/log/supervisor/laravel-worker-low.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=3

[group:laravel-workers]
programs=laravel-worker-high,laravel-worker-default,laravel-worker-low
priority=998
